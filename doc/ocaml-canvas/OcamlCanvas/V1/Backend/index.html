<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Backend (ocaml-canvas.OcamlCanvas.V1.Backend)</title><link rel="stylesheet" href="../../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">ocaml-canvas</a> &#x00BB; <a href="../../index.html">OcamlCanvas</a> &#x00BB; <a href="../index.html">V1</a> &#x00BB; Backend</nav><header class="odoc-preamble"><h1>Module <code><span>V1.Backend</span></code></h1><p>Initialization and event loop control</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>init ()</code> initializes the backend</p><p><b>Exceptions:</b></p><ul><li><code>Failure</code> if initialization fails</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'dummy1</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'dummy2</span></span></code></div><div class="spec-doc"><p><code>run k</code> executes the backend event loop, calling update functions as needed, and calling the continuation function <code>k</code> when the event loop terminates. Note that the call to <code>run</code> MUST be the last instruction in your program (to avoid different behaviors between the native and javascript backends). If you need to perform additional stuff when the program terminates, you MUST use the <code>k</code> function: it is meant for that. Note that calling <code>run</code> from an update function will just be ignored (though this should not be done). However, <code>run</code> may be called from the <code>k</code> function, if needed.</p><p><b>Exceptions:</b></p><ul><li><a href="../Exception/index.html#exception-Not_initialized"><code>Exception.Not_initialized</code></a> if <a href="#val-init"><code>Backend.init</code></a> was not called</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-stop"><a href="#val-stop" class="anchor"></a><code><span><span class="keyword">val</span> stop : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>stop ()</code> requests termination of the currently running event loop, if any. It should be called from an update function. Actual termination of the event loop will occur at the end of the current iteration of the event loop, so after calling <code>stop</code> an update function should proceed normally until it returns.</p><p><b>Exceptions:</b></p><ul><li><a href="../Exception/index.html#exception-Not_initialized"><code>Exception.Not_initialized</code></a> if <a href="#val-init"><code>Backend.init</code></a> was not called</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getCanvas"><a href="#val-getCanvas" class="anchor"></a><code><span><span class="keyword">val</span> getCanvas : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="../Canvas/index.html#type-t">Canvas.t</a></span></code></div><div class="spec-doc"><p><code>getCanvas i</code> returns the canvas that has id <code>i</code>, if it exists</p><p><b>Exceptions:</b></p><ul><li><a href="../Exception/index.html#exception-Not_initialized"><code>Exception.Not_initialized</code></a> if <a href="#val-init"><code>Backend.init</code></a> was not called</li><li><code>Not_found</code> if no canvas has id <code>i</code></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getCurrentTimestamp"><a href="#val-getCurrentTimestamp" class="anchor"></a><code><span><span class="keyword">val</span> getCurrentTimestamp : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Event/index.html#type-timestamp">Event.timestamp</a></span></code></div><div class="spec-doc"><p><code>getCurrentTimestamp ()</code> returns the current timestamp in microseconds, from an arbitrary starting point</p><p><b>Exceptions:</b></p><ul><li><a href="../Exception/index.html#exception-Not_initialized"><code>Exception.Not_initialized</code></a> if <a href="#val-init"><code>Backend.init</code></a> was not called</li></ul></div></div></div></body></html>